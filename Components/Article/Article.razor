@using System.Globalization
<article class="space-y-10">
  <header class=" border-gray-900/80 bg-gray-950/40  text-center sm:p-10">
    <div class="flex flex-col gap-4">
      @if (Published != null)
      {
        <dl class="flex flex-col items-center gap-2 text-gray-400">
          <dt class="sr-only">Published on</dt>
          <dd class="mono-label tracking-[0.3em]">
            <time datetime="@Published.Value.ToString("yyyy-MM-ddTHH:mm:ss.fffK", CultureInfo.InvariantCulture)">
              @Published.Value.ToString("MMM d, yyyy", new CultureInfo("en-US"))
            </time>
          </dd>
        </dl>
      }
      <div class="prose prose-invert mx-auto">
        <h1>@Title</h1>
      </div>
      @if (Tags != null && TagsPageUrl != null)
      {
        <div class="flex flex-wrap items-center justify-center gap-3">
          @foreach (var tag in Tags)
          {
            <a class="meta-chip hover:border-accent-500/50 hover:text-accent-300" href="@TagsPageUrl/@tag">@tag</a>
          }
        </div>
      }
    </div>
  </header>

  @if (Authors != null)
  {
    <section class="border border-gray-900/70 bg-gray-950/30  text-center sm:px-10">
      <dl class="sr-only">Authors</dl>
      <dd>
        <ul class="flex flex-wrap justify-center gap-4 sm:space-x-6">
          @Authors
        </ul>
      </dd>
    </section>
  }

  <section class="  bg-gray-950/40  ">
    <div class="prose prose-invert max-w-none">
      @((MarkupString)HtmlContent)
      @if (ArticleTail != null)
      {
        @ArticleTail
      }
    </div>
    <div class="mt-10 flex flex-wrap items-center justify-between gap-4">
      @if (FileName != null)
      {
        <a class="inline-flex items-center gap-2 rounded-full border border-accent-500/60 px-4 py-2 text-sm font-semibold text-accent-300 transition hover:border-accent-300 hover:text-white"
          target="_blank" rel="noopener noreferrer" href="@($"{WebsiteKeys.BlogPostStorageAddress}/{FileName}")">
          <span>View on GitHub</span>
          <span aria-hidden="true">↗</span>
        </a>
      }
      <a class="inline-flex items-center gap-2 text-sm font-semibold text-gray-300 transition hover:text-white"
        aria-label="Back to the home" href="">
        ← Back home
      </a>
    </div>
  </section>
</article>

@code {
  [Parameter, EditorRequired] public string HtmlContent { get; set; } = null!;
  [Parameter, EditorRequired] public string Title { get; set; } = null!;
  [Parameter] public string? FileName { get; set; }
  [Parameter] public IEnumerable<string>? Tags { get; set; }
  [Parameter] public string? TagsPageUrl { get; set; }
  [Parameter] public DateTime? Published { get; set; }
  [Parameter] public RenderFragment? Authors { get; set; }
  [Parameter] public RenderFragment? ArticleTail { get; set; }
}
